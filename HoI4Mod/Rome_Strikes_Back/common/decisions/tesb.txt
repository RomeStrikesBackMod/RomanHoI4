regaining_rome = {
	test_vars_check = {
		available = {
			original_tag = RME
		}
		visible = {
			original_tag = RME
		}
		complete_effect = {
			if = {
				limit = { has_country_flag = RME_check_territories }
				clr_country_flag = RME_check_territories
			}
			else = {
				set_country_flag = RME_check_territories
			}
		}
	}
	test_vars_restore = {
		icon = generic_form_nation
		available = {
			FROM = {
				is_subject = no
				NOT = { is_in_faction_with = RME }
			}
		}

		visible = {
			FROM = {
				exists = yes
			}
			has_country_flag = RME_check_territories
		}
		target_trigger = {
			FROM = {
				has_idea = RME_former_territory
				NOT = { is_subject_of = RME }
				any_owned_state = {
					#is_core_of = RME
				}
			}
		}

		#cost = 50

		complete_effect = {
			FROM = {
				custom_effect_tooltip = tvr_pup
				TESB_check_puppet_willingness = yes
				custom_effect_tooltip = tvr_fac
				TESB_check_faction_willingness = yes
				custom_effect_tooltip = tvr_int
				TESB_check_integrate_willingness = yes
			}
			if = {
				limit = {
					has_completed_focus = RME_reestablish_roman_hegemony
				}
				FROM = {
					TESB_check_puppet_willingness = yes
				}
			}
			if = {
				limit = {
					has_completed_focus = RME_restore_rome_focus
				}
				FROM = {
					TESB_check_faction_willingness = yes
				}
			}
		}
	}

	test_rme_vars = {
		available = { always = yes }
		visible = { always = yes }
		complete_effect = {
			every_country = {
				limit = {
					has_idea = RME_former_territory
					is_subject = no
				}
				country_event = { id = tesb_restore_rome.10 }
			}
			random_country = {
				limit = {
					has_idea = RME_former_territory
					is_subject_of = RME
				}
				RME = {
					annex_country = { target = PREV transfer_troops = yes }
				}
			}
		}
	}
	
	negotiate_with_territory = {
		icon = generic_form_nation
		available = {
			FROM = { is_subject = no }
			NOT = { has_war_with = FROM }
		}
		
		visible = {
			has_completed_focus = RME_restoring_the_empire
			FROM = {
				exists = yes
				NOT = { is_subject_of = RME }
				NOT = { is_in_faction_with = RME }
			}
		}
		target_trigger = {
			FROM = {
				exists = yes
				has_idea = RME_former_territory
				has_country_flag = RME_region_integration_started
				NOT = { is_subject_of = RME }
				NOT = { is_in_faction_with = RME }
			}
		}

		days_re_enable = 120
		days_remove = 60

		remove_effect = {
			if = {
				limit = { has_completed_focus = RME_reestablish_roman_hegemony }
				FROM = {
					country_event = { id = tesb_restore_rome.10 hours = 1 }
				}
			}
			else_if = {
				limit = { has_completed_focus = RME_restore_rome_focus }
				FROM = {
					country_event = { id = tesb_restore_rome.20 hours = 1 }
				}
			}
			else = {
				country_event = { id = tesb_rome.115 hours = 1 }
			}
		}
		ai_will_do = {
			base = 100
			modifier = {
				has_completed_focus = RME_reestablish_roman_hegemony
				check_variable = { From.puppet_willingness < 0 }
				factor = 0.001
			}
			modifier = {
				has_completed_focus = RME_restore_rome_focus
				check_variable = { From.faction_willingness < 0 }
				factor = 0.001
			}
		}
	}

	negotiate_with_foederati = {
		icon = generic_form_nation
		available = {
			FROM = { is_subject = no }
		}
		
		visible = {
			has_completed_focus = RME_integrate_foederati
			FROM = {
				exists = yes
				NOT = { is_subject_of = RME }
				is_in_faction_with = RME
			}
		}
		target_trigger = {
			FROM = {
				exists = yes
				has_idea = RME_former_territory
				has_country_flag = RME_region_integration_started
				NOT = { is_subject_of = RME }
				is_in_faction_with = RME
			}
		}

		days_re_enable = 120
		days_remove = 60

		remove_effect = {
			FROM = { country_event = { id = tesb_restore_rome.41 hours = 12 } }
		}
		ai_will_do = {
			base = 100
			modifier = {
				check_variable = { From.integrate_willingness < 0 }
				factor = 0.001
			}
		}
	}

	negotiate_with_foederati_2 = {
		icon = generic_form_nation
		
		visible = {
			has_completed_focus = RME_integrate_foederati
			FROM = {
				exists = yes
				is_subject_of = RME
			}
		}
		target_trigger = {
			FROM = {
				exists = yes
				has_idea = RME_former_territory
				has_country_flag = RME_region_integration_started
				is_subject_of = RME
			}
		}

		days_re_enable = 120
		days_remove = 60

		remove_effect = {
			FROM = { country_event = { id = tesb_restore_rome.51 hours = 12 } }
		}
		ai_will_do = {
			base = 100
			modifier = {
				check_variable = { From.integrate_willingness < 0 }
				factor = 0.001
			}
		}
	}
	
}

rome_civil_war_decisions = {
	prepare_black_sea_landing = {
		available = {
			ships_in_area = {
				area = 30 # significant_number - Black Sea
				size > 9 
			}
			any_other_country = {
				original_tag = RME
				ships_in_area = {
					area = 30 # significant_number - Black Sea
					size < 6 
				}
			}
			NOT = {
				controls_state = 468 # significant_number - Thrace
			}
		}
		visible = {
			has_government = democratic
		}
		custom_cost_trigger = {
			command_power > 30
		}
		complete_effect = {
			hidden_effect = {
				add_command_power = -30
			}
		}
		on_map_mode = map_and_decisions_view
		highlight_states = {
			highlight_state_targets = {
				state = 463 # significant_number - Eastern Rumelia
				state = 464 # significant_number - Bulgaria
			}
		}
		custom_cost_text = command_power_more_than_30
		days_remove = 30
		fixed_random_seed = no
		remove_effect = {
			hidden_effect = { country_event = { id = tesb_rome.11 } }
			effect_tooltip = {
				random_list = {
					33 = { country_event = { id = tesb_rome.12 } }
					33 = { country_event = { id = tesb_rome.13 } }
					33 = { country_event = { id = tesb_rome.14 } }
				}
			}
		}
		ai_will_do = {
			base = 1
		}
	}
	prepare_ionia_landing = {
		available = {
			ships_in_area = {
				area = 202 # significant_number - aegean sea
				size > 9 
			}
			any_other_country = {
				original_tag = RME
				ships_in_area = {
					area = 202 # significant_number - aegean sea
					size < 6 
				}
			}
			NOT = {
				controls_state = 474 # significant_number - Hudavendigar
			}
		}
		visible = {
			has_government = absolutist
		}
		custom_cost_trigger = {
			command_power > 30
		}
		complete_effect = {
			hidden_effect = {
				add_command_power = -30
			}
		}
		on_map_mode = map_and_decisions_view
		highlight_states = {
			highlight_state_targets = {
				state = 477 # significant_number - Aydin
				state = 475 # significant_number - Konya
			}
		}
		custom_cost_text = command_power_more_than_30
		days_remove = 30
		fixed_random_seed = no
		remove_effect = {
			hidden_effect = { country_event = { id = tesb_rome.15 } }
			effect_tooltip = {
				random_list = {
					33 = { country_event = { id = tesb_rome.16 } }
					33 = { country_event = { id = tesb_rome.17 } }
					33 = { country_event = { id = tesb_rome.18 } }
				}
			}
		}
		ai_will_do = {
			base = 1
		}
	}

	international_legions = {
		available = {
			original_tag = RME
		}
		visible = {
			has_government = democratic
		}
		cost = 50
		complete_effect = {
			load_oob = "RME_international_legions"
		}
		ai_will_do = {
			base = 100
		}
	}
}

burgundy_decisions = {
	fortify_zeeland = {
		fire_only_once = yes
		available = {
			OR = {
				BRG = { controls_state = 59 } # significant_number - Zeeland
				FLD = { controls_state = 59 is_subject_of = BRG } # significant_number - Zeeland
			}
			has_completed_focus = BRG_rhine_defenses
		}
		visible = {
			OR = {
				controls_state = 59 # significant_number - Zeeland
				FLD = { is_subject_of = BRG }
			}
		}
		days_remove = 70
		modifier = {
			political_power_gain = -0.5
		}
		remove_effect = {
			59 = { # significant_number - Zeeland
				custom_effect_tooltip = fortify_zeeland.tt
				hidden_effect = {
					add_building_construction = {
						type = bunker
						level = 2
						province  = {
							all_provinces = yes
						}
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						province = 9431
						instant_build = yes
					}
				}
			}
		}
	}
	BRG_integrate_state = {
		state_target = yes
		targets = {
			68 70 71 72 # significant_number - Wallonia, Champagne, Auvergne, Limousin
		}
		target_root_trigger = {
			#has_completed_focus = BRG_territorial_integration
		}
		available = {
			NOT = {
				has_country_flag = BRG_integrate_state_one_per
			}
			all_of_scopes = {
				array = FROM.core_countries
				tooltip = BRG_integrate_state_peace_TT
				NOT = { has_war_with = ROOT }
			}
		}
		target_trigger = {
			FROM = {
				is_owned_and_controlled_by = ROOT
				NOT = { is_core_of = ROOT }
			}
		}
		cost = 50
		days_remove = 180
		cancel_trigger = {
			any_of_scopes = {
				array = FROM.core_countries
				tooltip = BRG_integrate_state_war_TT
				has_war_with = ROOT
			}
		}
		cancel_effect = {
			clr_country_flag = BRG_integrate_state_one_per
		}
		complete_effect = {
			set_country_flag = BRG_integrate_state_one_per
		}
		remove_effect = {
			FROM = { add_core_of = ROOT }
			clr_country_flag = BRG_integrate_state_one_per
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0.5
				FROM = { NOT = { state = 68 } } # significant_number - Wallonia
				68 = { NOT = { is_core_of = ROOT } } # significant_number - Wallonia
			}
			modifier = {
				factor = 0.5
				68 = { is_core_of = ROOT } # significant_number - Wallonia
				FROM = { NOT = { state = 70 } } # significant_number - Champagne
				70 = { NOT = { is_core_of = ROOT } } # significant_number - Champagne
			}
		}
	}
}

germany_decisions = {
	prepare_speech = {
		icon = eng_propaganda_campaigns
		available = {
			NOT = { has_country_flag = GER_recent_speech }
			custom_trigger_tooltip = {
				tooltip = GER_speech_state_TT
				all_owned_state = {
					NOT = { has_state_flag = GER_speech_state }
				}
			}
		}
		visible = {
			has_country_flag = GER_election_1936_flag
			any_owned_state = {
				NOT = { has_state_flag = GER_had_speech }
			}
		}
		complete_effect = {
			random_owned_controlled_state = {
				limit = {
					is_in_home_area = yes
					NOT = { has_state_flag = GER_had_speech }
				}
				set_state_flag = GER_speech_state
			}
		}
		cost = 10
		fixed_random_seed = no
	}
	democratic_speech = {
		on_map_mode = map_and_decisions_view
		icon = generic_political_discourse
		available = {
			NOT = { has_country_flag = GER_rache has_country_flag = GER_arbeiterpartei has_country_flag = GER_maintain_balance }
		}
		highlight_states = {
			highlight_states_trigger = {
				has_state_flag = GER_speech_state
			}
		}
		visible = {
			any_owned_state = {
				has_state_flag = GER_speech_state
			}
		}
		complete_effect = {
			set_country_flag = {
				flag = GER_recent_speech
				days = 15
				value = 1
			}
			random_list = {
				50 = {
					modifier = {
						factor = 2
						any_owned_state = {
							has_state_flag = GER_speech_state
							NOT = { is_core_of = DEN is_core_of = BAV }
						}
					}
					country_event = {
						id = tesb_GER.1
					}
				}
				50 = {
					modifier = {
						factor = 1.5
						any_owned_state = {
							has_state_flag = GER_speech_state
							is_core_of = DEN
						}
					}
					country_event = {
						id = tesb_GER.4
					}
				}
			}
			random_owned_state = {
				limit = {
					has_state_flag = GER_speech_state
				}
				set_state_flag = GER_had_speech
				clr_state_flag = GER_speech_state
			}
		}
		cost = 20
		fixed_random_seed = no
		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				has_country_flag = GER_maintain_balance_path_flag
			}
		}
	}
	communist_speech = {
		on_map_mode = map_and_decisions_view
		icon = generic_nationalism
		available = {
			NOT = { has_country_flag = GER_rache has_country_flag = GER_arbeiterpartei has_country_flag = GER_maintain_balance }
		}
		highlight_states = {
			highlight_states_trigger = {
				has_state_flag = GER_speech_state
			}
		}
		visible = {
			any_owned_state = {
				has_state_flag = GER_speech_state
			}
		}
		complete_effect = {
			set_country_flag = {
				flag = GER_recent_speech
				days = 15
				value = 1
			}
			random_list = {
				50 = {
					modifier = {
						factor = 2
						any_owned_state = {
							has_state_flag = GER_speech_state
							is_core_of = BAV
						}
					}
					country_event = {
						id = tesb_GER.3
					}
				}
				50 = {
					modifier = {
						factor = 2
						any_owned_state = {
							has_state_flag = GER_speech_state
							is_core_of = DEN
						}
					}
					country_event = {
						id = tesb_GER.6
					}
				}
			}
			random_owned_state = {
				limit = {
					has_state_flag = GER_speech_state
				}
				set_state_flag = GER_had_speech
				clr_state_flag = GER_speech_state
			}
		}
		cost = 20
		fixed_random_seed = no
		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				has_country_flag = GER_arbeiterpartei_path_flag
			}
		}
	}
	fascist_speech = {
		on_map_mode = map_and_decisions_view
		icon = eng_blackshirt_speech
		available = {
			NOT = { has_country_flag = GER_rache has_country_flag = GER_arbeiterpartei has_country_flag = GER_maintain_balance }
		}
		highlight_states = {
			highlight_states_trigger = {
				has_state_flag = GER_speech_state
			}
		}
		visible = {
			any_owned_state = {
				has_state_flag = GER_speech_state
			}
		}
		complete_effect = {
			set_country_flag = {
				flag = GER_recent_speech
				days = 15
				value = 1
			}
			random_list = {
				50 = {
					modifier = {
						factor = 2
						any_owned_state = {
							has_state_flag = GER_speech_state
							is_core_of = DEN
						}
					}
					country_event = {
						id = tesb_GER.2
					}
				}
				50 = {
					modifier = {
						factor = 2
						any_owned_state = {
							has_state_flag = GER_speech_state
							is_core_of = BAV
						}
					}
					country_event = {
						id = tesb_GER.5
					}
				}
			}
			random_owned_state = {
				limit = {
					has_state_flag = GER_speech_state
				}
				set_state_flag = GER_had_speech
				clr_state_flag = GER_speech_state
			}
		}
		cost = 20
		fixed_random_seed = no
		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				has_country_flag = GER_rache_path_flag
			}
		}
	}
	prevent_fascist_civil_war = {
		fire_only_once = yes
		is_good = no
		available = {
			OR = {
				has_government = fascism
				fascism < 0.1
			}
		}
		activation = {
			OR = {
				has_completed_focus = GER_maintain_balance
				has_completed_focus = GER_arbeiterpartei
			}
			fascism > 0.3
			has_stability < 0.8
		}
		days_mission_timeout = 180
		timeout_effect = {
			start_civil_war = {
				ideology = fascism
				capital = 213
				size = 0.5
				states = { 211 217 218 219 220 221 222 228 229 230 } # significant_number - Anhalt, Hannover, Lower Elbe, Pommerania, Mecklenburg, Holstein, Brandenburg, Schleswig, Jylland, Posen
				states_filter = {
					OR = { is_core_of = DEN is_core_of = PLC }
				}
			}
		}
		complete_effect = {
			add_political_power = 50
		}
	}
}

england_decisions = {
	round_up_communist_dissenters = {
		available = {
			has_idea = ENG_dissenters_arrested
		}
		visible = {
			has_completed_focus = ENG_arrest_dissenters
		}
		cost = 25
		complete_effect = {
			add_popularity = {
				ideology = communism
				popularity = -0.05
			}
		}
		days_re_enable = 60
	}
}

russia_decisions = {
	negotiate_for_karelia_kola = {
		days_remove = 7
		visible = {
			has_completed_focus = RUS_karelia
			NOT = { has_country_flag = RUS_purchased_karelia }
			NOT = { has_country_flag = RUS_purchased_kola }
			NOT = { owns_state = 564 } # significant_number - Karelia
			any_other_country = {
				owns_state = 564 # significant_number - Karelia
				owns_state = 408 # significant_number - Kola
			}
		}
		available = {
			has_war = no
			any_other_country = {
				owns_state = 564 # significant_number - Karelia
				owns_state = 408 # significant_number - Kola
				has_war = no
			}
		}
		cost = 50
		highlight_states = {
			highlight_state_targets = {
				state = 564 # significant_number - Karelia
				state = 408 # significant_number - Kola
			}
		}
		complete_effect = {
			random_other_country = {
				limit = {
					owns_state = 564 # significant_number - Karelia
					owns_state = 408 # significant_number - Kola
				}
				if = {
					limit = {
						is_subject_of = RUS
					}
					transfer_state = 564 # significant_number - Karelia
					transfer_state = 408 # significant_number - Kola
					else_if = {
						limit = {
							is_subject = yes
						}
						custom_effect_tooltip = RUS_karelia_kola_overlord
						OVERLORD = {
							country_event = { id = tesb_RUS.120 }
						}
					}
					else = {
						country_event = { id = tesb_RUS.120 }
					}
				}
			}
		}
		ai_will_do = {
			base = 10
		}
	}	
	negotiate_for_karelia = {
		days_remove = 7
		visible = {
			has_completed_focus = RUS_karelia
			NOT = { has_country_flag = RUS_purchased_karelia }
			NOT = { owns_state = 564 } # significant_number - Karelia
			any_other_country = {
				owns_state = 564 # significant_number - Karelia
				NOT = { owns_state = 408 } # significant_number - Kola
			}
		}
		available = {
			has_war = no
			any_other_country = {
				owns_state = 564 # significant_number - Karelia
				NOT = { owns_state = 408 } # significant_number - Kola
				has_war = no
			}
		}
		cost = 25
		highlight_states = {
			highlight_state_targets = {
				state = 564 # significant_number - Karelia
			}
		}
		complete_effect = {
			random_other_country = {
				limit = {
					owns_state = 564 # significant_number - Karelia
				}
				if = {
					limit = {
						is_subject_of = RUS
					}
					transfer_state = 564 # significant_number - Karelia
					else_if = {
						limit = {
							is_subject = yes
						}
						custom_effect_tooltip = RUS_karelia_kola_overlord
						OVERLORD = {
							country_event = { id = tesb_RUS.120 }
						}
					}
					else = {
						country_event = { id = tesb_RUS.120 }
					}
				}
			}
		}
		ai_will_do = {
			base = 10
		}
	}
	negotiate_for_kola = {
		days_remove = 7
		visible = {
			has_completed_focus = RUS_karelia
			NOT = { has_country_flag = RUS_purchased_kola }
			NOT = { owns_state = 408 } # significant_number - Kola
			any_other_country = {
				owns_state = 408 # significant_number - Kola
				NOT = { owns_state = 564 } # significant_number - Karelia
			}
		}
		available = {
			has_war = no
			any_other_country = {
				owns_state = 408 # significant_number - Kola
				NOT = { owns_state = 564 } # significant_number - Karelia
				has_war = no
			}
		}
		cost = 25
		highlight_states = {
			highlight_state_targets = {
				state = 408 # significant_number - Kola
			}
		}
		complete_effect = {
			random_other_country = {
				limit = {
					owns_state = 408 # significant_number - Kola
				}
				if = {
					limit = {
						is_subject_of = RUS
					}
					transfer_state = 408 # significant_number - Kola
					else_if = {
						limit = {
							is_subject = yes
						}
						custom_effect_tooltip = RUS_karelia_kola_overlord
						OVERLORD = {
							country_event = { id = tesb_RUS.120 }
						}
					}
					else = {
						country_event = { id = tesb_RUS.120 }
					}
				}
			}
		}
		ai_will_do = {
			base = 10
		}
	}
	negotiate_for_sakhalin_kurils = {
		days_remove = 7
		visible = {
			has_completed_focus = RUS_asian_expansion
			NOT = { has_country_flag = RUS_purchased_kurils }
			NOT = { owns_state = 312 } # significant_number - Sakhalin
			NOT = { owns_state = 313 } # significant_number - Kuril Islands
			JAP = {
				owns_state = 312 # significant_number - Sakhalin
				owns_state = 313 # significant_number - Kuril Islands
			}
		}
		available = {
			has_war = no
			JAP = {
				owns_state = 312 # significant_number - Sakhalin
				owns_state = 313 # significant_number - Kuril Islands
				has_war = no
				is_subject = no
			}
		}
		cost = 50
		highlight_states = {
			highlight_state_targets = {
				state = 312 # significant_number - Sakhalin
				state = 313 # significant_number - Kuril Islands
			}
		}
		complete_effect = {
			JAP = {
				if = {
					limit = {
						is_subject_of = RUS
					}
					transfer_state = 312 # significant_number - Sakhalin
					transfer_state = 313 # significant_number - Kuril Islands
					else = {
						country_event = { id = tesb_RUS.130 }
					}
				}
			}
		}
		ai_will_do = {
			base = 10
		}
	}	
	negotiate_with_manchu = {
		days_remove = 7
		visible = {
			has_completed_focus = RUS_asian_expansion
			NOT = { has_country_flag = RUS_manchu_treaty }
			NOT = { owns_state = 337 } # significant_number - Haishenwai
			NOT = { owns_state = 338 } # significant_number - Eastern Mongolia
			MAN = {
				owns_state = 337 # significant_number - Haishenwai
				owns_state = 338 # significant_number - Eastern Mongolia
			}
		}
		available = {
			has_war = no
			MAN = {
				owns_state = 337 # significant_number - Haishenwai
				owns_state = 338 # significant_number - Eastern Mongolia
				has_war = no
				is_subject = no
			}
		}
		cost = 50
		highlight_states = {
			highlight_state_targets = {
				state = 337 # significant_number - Haishenwai
				state = 338 # significant_number - Eastern Mongolia
			}
		}
		complete_effect = {
			MAN = {
				if = {
					limit = {
						is_subject_of = RUS
					}
					transfer_state = 337 # significant_number - Haishenwai
					transfer_state = 338 # significant_number - Eastern Mongolia
					else = {
						country_event = { id = tesb_RUS.140 } 
					}
				}
			}
			custom_effect_tooltip = RUS_manchu_treaty_tt
		}
		ai_will_do = {
			base = 10
		}
	}
}

aotearoa_decisions = {
	AOT_testing = {
		visible = {
			is_debug = yes
		}
		available = {

		}
		complete_effect = {
			every_state = {
				clr_state_flag = AOT_already_expanding_influence_flag
			}
		}
	}
	AOT_recall_timon = {
		visible = {
			has_country_leader = {
				character = AOT_kyrene_thaddas
			}
			has_country_flag = AOT_kyrene_dying
			has_idea = AOT_timon_abroad
		}
		fire_only_once = yes
		days_remove = 60
		complete_effect = {
			hidden_effect = {
				RME = {
					country_event = { id = tesb_AOT.4 hours = 12 }
				}
			}
		}
		remove_effect = {
			if = {
				limit = {
					has_country_flag = AOT_timon_returning
				}
				custom_effect_tooltip = AOT_recall_timon_return_TT
				hidden_effect = {
					swap_ideas = {
						remove_idea = AOT_timon_abroad
						add_idea = AOT_timon_at_home
					}
					uncomplete_national_focus = {
						focus = AOT_send_timon_to_constantiople
						uncomplete_children = yes
					}
					unlock_national_focus = AOT_keep_timon_in_aotearoa
				}
				else_if = {
					limit = { has_country_flag = AOT_timon_visit }
					custom_effect_tooltip = AOT_recall_timon_vist_TT
				}
				else_if = {
					limit = { has_country_flag = AOT_timon_stay_rome }
					custom_effect_tooltip = AOT_recall_timon_stay_TT
				}
				else = {
					custom_effect_tooltip = AOT_recall_timon_TT
				}
			}
		}
		ai_will_do = {
			base = 1
		}
	}
	AOT_reconciling_with_rome = {
		days_mission_timeout = 730
		fire_only_once = yes
		activation = {
			always = no
			has_global_flag = RME_civil_war_over #activated by on_action
		}
		available = {
			has_country_flag = AOT_reconciled_rome
		}
		cancel_trigger = {
			if = {
				limit = { country_exists = RMA }
				OR = {
					is_subject = yes
					RMA = { exists = no }
					is_in_faction_with = RMA
				}
				else_if = {
					limit = { country_exists = RMD }
					OR = {
						is_subject = yes
						RMD = { exists = no }
						is_in_faction_with = RMD
					}
				}
				else = {
					always = yes
				}
			}
		}
		is_good = no
		timeout_effect = {
			add_stability = -0.1
			add_political_power = -50
		}
	}
	AOT_reject_RME = {
		visible = {
			has_active_mission = AOT_reconciling_with_rome
		}
		available = {
			
		}
		complete_effect = {
			set_country_flag = AOT_reconciled_rome
		}
		ai_will_do = {
			base = 0
			modifier = {
				add = 1
				check_variable = {
					days_mission_timeout@AOT_reconciling_with_rome < 40
				}
			}
			modifier = {
				add = 1
				OR = {
					has_war_with = RMD
					has_war_with = RMA
				}
			}
		}
	}
	AOT_ally_RMD = {
		visible = {
			has_active_mission = AOT_reconciling_with_rome
			country_exists = RMD
		}
		available = {
			RMD = { has_government = democratic is_faction_leader = yes }
			NOT = { has_war_with = RMD }
		}
		complete_effect = {
			if = {
				limit = { RMD = { is_faction_leader = yes } }
				RMD = { country_event = { id = generic.2 } }
				else = { custom_effect_tooltip = AOT_join_RME_faction_TT }
			}
			set_country_flag = AOT_reconciled_rome
		}
		ai_will_do = {
			base = 1
			modifier = {
				factor = 0
				NOT = {
					has_government = democratic
					has_government = neutrality
				}
			}
		}
	}
	AOT_subject_RMD = {
		visible = {
			has_active_mission = AOT_reconciling_with_rome
			country_exists = RMD
			is_independent_country = yes
		}
		available = {
			RMD = { has_government = democratic }
			NOT = { has_war_with = RMD }
		}
		complete_effect = {
			RMD = { country_event = { id = tesb_AOT.10 } }
			set_country_flag = AOT_reconciled_rome
		}
		ai_will_do = {
			base = 1
			modifier = {
				factor = 0
				NOT = {
					has_government = democratic
					has_government = neutrality
				}
			}
			modifier = {
				factor = 0
				RMD = { is_faction_leader = no }
				check_variable = {
					days_mission_timeout@AOT_reconciling_with_rome > 80
				}
			}
		}
	}
	AOT_ally_RMA = {
		visible = {
			has_active_mission = AOT_reconciling_with_rome
			country_exists = RMA
		}
		available = {
			RMA = { has_government = absolutist is_faction_leader = yes }
			NOT = { has_war_with = RMA }
		}
		complete_effect = {
			if = {
				limit = { RMA = { is_faction_leader = yes } }
				RMA = { country_event = { id = generic.2 } }
				else = { custom_effect_tooltip = AOT_join_RME_faction_TT }
			}
			set_country_flag = AOT_reconciled_rome
		}
		ai_will_do = {
			base = 1
			modifier = {
				factor = 0
				NOT = {
					has_government = absolutist
					has_government = neutrality
				}
			}
		}
	}
	AOT_subject_RMA = {
		visible = {
			has_active_mission = AOT_reconciling_with_rome
			country_exists = RMA
		}
		available = {
			RMA = { has_government = absolutist }
			NOT = { has_war_with = RMA }
		}
		complete_effect = {
			RMA = { country_event = { id = tesb_AOT.12 } }
			set_country_flag = AOT_reconciled_rome
		}
		ai_will_do = {
			base = 1
			modifier = {
				factor = 0
				NOT = {
					has_government = absolutist
					has_government = neutrality
				}
			}
			modifier = {
				factor = 0
				RMA = { is_faction_leader = no }
				check_variable = {
					days_mission_timeout@AOT_reconciling_with_rome > 80
				}
			}
		}
	}
	AOT_mesazon_power_struggle = {
		days_mission_timeout = 350
		available = {
			has_completed_focus = AOT_silence_opposition
		}
		complete_effect = {
			add_stability = 0.2
			add_war_support = 0.2
			add_political_power = 60
		}
		timeout_effect = {
			start_civil_war = {
				ideology = democratic
				ruling_party = absolutist
			}
		}
		is_good = no
		fire_only_once = yes
		activation = {
			always = no
		}
	}
	AOT_neo_taneist_plot = {
		days_mission_timeout = 140
		available = {
			OR = {
				has_country_flag = AOT_neo_taneist_plot_countered
				fascism < 0.1
			}
		}
		timeout_effect = {
			add_stability = -0.05
			if = {
				limit = {
					has_country_leader = {
						character = AOT_timon_thaddas
						ruling_only = yes
					}
				}
				kill_country_leader = yes
			}
			else = {
				custom_effect_tooltip = AOT_neo_taneist_plot_timeout_TT
			}
			hidden_effect = {
				retire_character = AOT_timon_thaddas
			}
			if = {
				limit = {
					has_completed_focus = AOT_reluctant_leader
				}
				uncomplete_national_focus = {
					focus = AOT_reluctant_leader
					uncomplete_children = yes
				}
				complete_national_focus = AOT_taneist_tendrils
			}
			news_event = {
				id = tesb_AOT.7
			}
		}
		complete_effect = {
			add_stability = 0.05
			if = {
				limit = {
					has_completed_focus = AOT_taneist_tendrils
				}
				uncomplete_national_focus = {
					focus = AOT_taneist_tendrils
					uncomplete_children = yes
				}
				complete_national_focus = AOT_reluctant_leader
			}
		}
		is_good = no
		fire_only_once = yes
		activation = {
			always = no
		}
	}
	AOT_investigate_neo_taneists = {
		visible = {
			has_active_mission = AOT_neo_taneist_plot
		}
		available = {
			focus_progress = {
				focus = AOT_reluctant_leader
				progress > 0
			}
		}
		cost = 70
		days_remove = 70
		remove_effect = {
			set_country_flag = AOT_neo_taneist_plot_countered
			custom_effect_tooltip = AOT_neo_taneist_plot_countered
		}
		ai_will_do = {
			base = 1
			modifier = {
				factor = 10
				check_variable = {
					days_mission_timeout@AOT_neo_taneist_plot < 80
				}
			}
		}
	}
}

AOT_islands = {
	AOT_influence_iranian_pacific_islands = {
		state_target = yes
		target_array = AOT.AOT_iranian_pacific_islands
		icon = {
			key = aot_island_control_none
			trigger = {
				FROM = { check_variable = { var = aot_island_control value = 1 compare = equals } }
			}
		}
		icon = {
			key = aot_island_control_weak
			trigger = {
				FROM = { check_variable = { var = aot_island_control value = 2 compare = equals }}
			}
		}
		icon = {
			key = aot_island_control_strong
			trigger = {
				FROM = { check_variable = { var = aot_island_control value = 3 compare = equals } }
			}
		}
		icon = {
			key = aot_island_control_total
			trigger = {
				FROM = { check_variable = { var = aot_island_control value = 4 compare = greater_than_or_equals } }
			}
		}

		target_root_trigger = {
			OR = {
				original_tag = AOT
				original_tag = IRN
				original_tag = X01
			}
			NOT = {
				has_war_with = AOT
				has_war_with = IRN
				has_war_with = X01
			}
		}
		target_trigger = {
			FROM = {
				OR = {
					is_fully_controlled_by = IRN
					is_fully_controlled_by = X01
				}
			}
		}
		available = {
			if = {
				limit = {
					original_tag = AOT
				}
				custom_trigger_tooltip = {
					tooltip = AOT_expand_influence_trigger_tt
					FROM = { check_variable = { var = aot_island_control value = 3 compare = less_than } }
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = AOT_reduce_influence_trigger_tt
					FROM = { check_variable = { var = aot_island_control value = 1 compare = greater_than_or_equals } }
				}
			}
			FROM = {
				NOT = { has_state_flag = AOT_already_expanding_influence_flag }
			}
		}

		highlight_states = {
			highlight_state_targets = { state = FROM } 
		}

		on_map_mode = map_and_decisions_view

		cost = FROM.aot_island_control_cost?10

		fire_only_once = no

		days_remove = 14

		visible = {
			
		}

		cancel_if_not_visible = yes

		complete_effect = {
			FROM = { set_state_flag = AOT_already_expanding_influence_flag }
		}

		remove_effect = {
			if = {
				limit = {
					original_tag = AOT
				}
				FROM = {
					custom_effect_tooltip = AOT_expand_influence_tt
					set_state_flag = { flag = AOT_recently_expanded_influence_flag value = 1 days = 15 }
					hidden_effect = {
						if = {
							limit = { check_variable = { aot_island_control < 3 } }
							add_to_variable = { var = aot_island_control value = 1 }
						}
					}
					aot_island_control_tooltip = yes
					aot_island_control_cost_calculation = yes
				}
			}
			if = {
				limit = {
					NOT = { original_tag = AOT }
				}
				FROM = {
					custom_effect_tooltip = AOT_reduce_influence_tt
					set_state_flag = { flag = AOT_recently_expanded_influence_flag value = 1 days = 15 }
					hidden_effect = {
						subtract_from_variable = { var = aot_island_control value = 1 }
					}
					aot_island_control_tooltip = yes
					aot_island_control_cost_calculation = yes
				}
			}
			FROM = { clr_state_flag = AOT_already_expanding_influence_flag }
		}

		ai_will_do = {
			base = 110
			modifier = {
				FROM = { has_state_flag = AOT_recently_expanded_influence_flag }
				factor = 10
			}
			modifier = {
				original_tag = AOT
				FROM = { check_variable = { var = aot_island_control value = 2 compare = greater_than_or_equals } }
				factor = 5
			}
			modifier = {
				original_tag = AOT
				FROM = { check_variable = { var = aot_island_control value = 3 compare = greater_than_or_equals } }
				factor = 5
			}
		}
	}

	AOT_influence_australian_pacific_islands = {
		state_target = yes
		target_array = AOT.AOT_australian_pacific_islands
		icon = {
			key = aot_island_control_none
			trigger = {
				FROM = { check_variable = { var = aot_island_control value = 1 compare = equals } }
			}
		}
		icon = {
			key = aot_island_control_weak
			trigger = {
				FROM = { check_variable = { var = aot_island_control value = 2 compare = equals }}
			}
		}
		icon = {
			key = aot_island_control_strong
			trigger = {
				FROM = { check_variable = { var = aot_island_control value = 3 compare = equals } }
			}
		}
		icon = {
			key = aot_island_control_total
			trigger = {
				FROM = { check_variable = { var = aot_island_control value = 4 compare = greater_than_or_equals } }
			}
		}
		target_root_trigger = {
			OR = {
				original_tag = AOT
				original_tag = AST
			}
			NOT = {
				has_war_with = AOT
				has_war_with = AST
			}
		}
		target_trigger = {
			FROM = { is_fully_controlled_by = AST }
		}
		available = {
			if = {
				limit = {
					original_tag = AOT
				}
				custom_trigger_tooltip = {
					tooltip = AOT_expand_influence_trigger_tt
					FROM = { check_variable = { var = aot_island_control value = 3 compare = less_than } }
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = AOT_reduce_influence_trigger_tt
					FROM = { check_variable = { var = aot_island_control value = 1 compare = greater_than_or_equals } }
				}
			}
			FROM = {
				NOT = {
					has_state_flag = AOT_already_expanding_influence_flag
				}
			}
		}

		highlight_states = {
			highlight_state_targets = { state = FROM } 
		}

		on_map_mode = map_and_decisions_view

		cost = FROM.aot_island_control_cost?10

		fire_only_once = no

		days_remove = 14

		visible = {
			
		}

		cancel_if_not_visible = yes

		complete_effect = {
			FROM = { set_state_flag = AOT_already_expanding_influence_flag }
		}

		remove_effect = {
			if = {
				limit = {
					original_tag = AOT
				}
				FROM = {
					custom_effect_tooltip = AOT_expand_influence_tt
					set_state_flag = { flag = AOT_recently_expanded_influence_flag value = 1 days = 15 }
					hidden_effect = {
						if = {
							limit = { check_variable = { aot_island_control < 3 } }
							add_to_variable = { var = aot_island_control value = 1 }
						}
					}
					aot_island_control_tooltip = yes
					aot_island_control_cost_calculation = yes
				}
			}
			if = {
				limit = {
					NOT = { original_tag = AOT }
				}
				FROM = {
					custom_effect_tooltip = AOT_reduce_influence_tt
					set_state_flag = { flag = AOT_recently_expanded_influence_flag value = 1 days = 15 }
					hidden_effect = {
						subtract_from_variable = { var = aot_island_control value = 1 }
					}
					aot_island_control_tooltip = yes
					aot_island_control_cost_calculation = yes
				}
			}
			FROM = { clr_state_flag = AOT_already_expanding_influence_flag }
		}

		ai_will_do = {
			base = 110
			modifier = {
				FROM = { has_state_flag = AOT_recently_expanded_influence_flag }
				factor = 10
			}
			modifier = {
				original_tag = AOT
				FROM = { check_variable = { var = aot_island_control value = 2 compare = greater_than_or_equals } }
				factor = 5
			}
			modifier = {
				original_tag = AOT
				FROM = { check_variable = { var = aot_island_control value = 3 compare = greater_than_or_equals } }
				factor = 5
			}
		}
	}

}

mexhico_decisions = {
	MEX_object_to_UTA_interference = {
		fire_only_once = yes
		visible = {
			has_idea = MEX_strengthen_democracy
			country_exists = UTA
		}
		available = {
			has_government = absolutist
			NOT = { has_war_with = UTA }
			democratic > 0.38
		}
		complete_effect = {
			UTA = { country_event = { id = tesb_UTA.1 } }
		}
		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				NOT = {
					has_government = absolutist
					has_government = neutrality
				}
			}
		}
	}

	MEX_white_peace_with_england = {
		visible = {
			has_war_with = ENG
			NOT = { is_in_faction_with = UTA }
		}
		available = {
			OR = {
				date > 1937.06.01
			}
			NOT = { is_in_faction_with = UTA }
		}
		complete_effect = {
			ENG = { country_event = { id = tesb_UTA.6 } }
		}
		ai_will_do = {
			base = 100
		}
	}
}

UTA_decisions = {
	UTA_call_for_elections = {
		fire_only_once = yes
		visible = {
			has_completed_focus = UTA_support_mexhican_democracy
			country_exists = MEX
			MEX = { NOT = { has_government = democratic } }
		}
		available = {
			has_government = democratic
			NOT = { has_war_with = MEX }
			MEX = { democratic > 0.45 }
		}
		cost = 50
		complete_effect = {
			MEX = { country_event = { id = tesb_UTA.4 } }
		}
		ai_will_do = {
			base = 100
		}
	}

	UTA_negotiate_for_biru_lands = {
		visible = {
			NOT = {
				BIR = { controls_state = 39 } # significant_number - Araucania
				BIR = { controls_state = 40 } # significant_number - Los Rios
				ARG = { is_puppet_of = UTA }
			}
			is_in_faction_with = BIR
		}
		available = {
			NOT = { has_war_with = ARG }
			has_completed_focus = UTA_focus_on_south_america
			NOT = { has_country_flag = UTA_negotiated_for_biru_lands }
		}
		cost = 50
		complete_effect = {
			ARG = { country_event = { id = tesb_UTA.30 } }
			set_country_flag = UTA_negotiated_for_biru_lands
		}
		ai_will_do = {
			base = 100
		}
	}

	UTA_forcibly_return_biru_lands = {
		visible = {
			NOT = {
				BIR = { controls_state = 39 } # significant_number - Araucania
				BIR = { controls_state = 40 } # significant_number - Los Rios
			}
			is_in_faction_with = BIR
		}
		available = {
			ARG = { is_puppet_of = UTA }
			has_completed_focus = UTA_focus_on_south_america
		}
		cost = 50
		complete_effect = {
			ARG = { country_event = { id = tesb_UTA.40 } }
		}
		ai_will_do = {
			base = 50
		}
	}

	UTA_white_peace_with_adal = {
		visible = {
			has_war_with = ADA
		}
		available = {
			NOT = { has_war_with = MEX }
			NOT = { has_war_with = ENG }
		}
		complete_effect = {
			ADA = { country_event = { id = tesb_UTA.90 } }
		}
		ai_will_do = {
			base = 100
		}
	}

	UTA_forcibly_return_colombian_lands = {
		visible = {
			NOT = {
				COL = { controls_state = 176 } # Significant number - Bolívar
				COL = { controls_state = 177 } # Significant number - Guaviare
				COL = { controls_state = 179 } # Significant number - Panama Canal
			}
			176 = { is_core_of = COL } # Significant number - Bolívar
			177 = { is_core_of = COL } # Significant number - Guaviare
			179 = { is_core_of = COL } # Significant number - Panama Canal
			is_in_faction_with = COL
		}
		available = {
			ENG = { is_puppet_of = UTA }
			has_completed_focus = UTA_focus_on_south_america
		}
		cost = 50
		complete_effect = {
			ENG = { country_event = { id = tesb_UTA.60 } }
		}
		ai_will_do = {
			base = 100
		}
	}

	UTA_forcibly_take_argentine_claims = {
		visible = {
			NOT = {
				ARG = { controls_state = 170 } # Significant number - Santa Catarina
				ARG = { controls_state = 171 } # Significant number - Rio Grande do Sul
			}
			170 = { is_claimed_by = ARG } # Significant number - Santa Catarina
			171 = { is_claimed_by = ARG } # Significant number - Rio Grande do Sul
			is_in_faction_with = ARG
		}
		available = {
			ENG = { is_puppet_of = UTA }
			has_completed_focus = UTA_focus_on_south_america
		}
		cost = 50
		complete_effect = {
			ENG = { country_event = { id = tesb_UTA.70 } }
		}
		ai_will_do = {
			base = 100
		}
	}

	UTA_remove_english_from_power = {
		visible = {
			has_completed_focus = UTA_freedom_for_brazil
		}
		available = {
			ENG = { is_puppet_of = UTA }
		}
		cost = 100
		complete_effect = {
			ENG = { set_cosmetic_tag = BRA }
		}
		ai_will_do = {
			base = 50
    }
  }
}

italy_decisions = {
	ITA_ask_pope_again = {
		fire_only_once = yes
		visible = {
			NOT = { has_country_flag = ITA_crowned_giuseppe }
			has_country_flag = ITA_pope_refused_coronation
		}
		available = {
			BRG = { is_friend_or_potential_friend_of_ROOT = yes }
			has_country_leader = {
				character = ITA_giuseppe_lombardi
			}
		}
		days_remove = 10
		remove_effect = {
			BRG = {
				country_event = { id = tesb_ITA.1 }
			}
		}
		cost = 50
	}
	ITA_self_coronation = {
		fire_only_once = yes
		visible = {
			NOT = { has_country_flag = ITA_crowned_giuseppe }
			has_country_flag = ITA_pope_refused_coronation
		}
		available = {
			has_country_leader = {
				character = ITA_giuseppe_lombardi
			}
		}
		complete_effect = {
			country_event = { id = tesb_ITA.4 }
		}
		cost = 250
	}
}

ITA_hre_influence_decisions = {
	ITA_hre_political_influence = {
		icon = generic_political_discourse

		allowed = {
			tag = ITA
		}
		available = {
			has_government = absolutist
			BRG = { has_government = absolutist }
			is_in_faction_with = BRG
		}
		targets = { BRG }
		target_trigger = {
			FROM = {
				tag = BRG
			}
		}

		days_remove = 20
		cost = 10
		remove_effect = {
			custom_effect_tooltip = ITA_hre_political_influence_tt
			add_to_variable = { ITA_hre_influence = 5 }
			set_variable = { ITA.hre_influence_diff = ITA.ITA_hre_influence }
			subtract_from_variable = { ITA.hre_influence_diff = BRG.BRG_hre_influence }
			hidden_effect = {
				if = {
					limit = {
						date < 1939.08.01
					}
					random_list = {
						10 = {
							set_country_flag = { flag = hre_influence_decisions_ai_timer_flag value = 1 days = 50 }
						}
						10 = {
							set_country_flag = { flag = hre_influence_decisions_ai_timer_flag value = 1 days = 55 }
						}
						10 = {
							set_country_flag = { flag = hre_influence_decisions_ai_timer_flag value = 1 days = 60 }
						}
						10 = {
							set_country_flag = { flag = hre_influence_decisions_ai_timer_flag value = 1 days = 65 }
						}
						10 = {
							set_country_flag = { flag = hre_influence_decisions_ai_timer_flag value = 1 days = 70 }
						}
						10 = {
							set_country_flag = { flag = hre_influence_decisions_ai_timer_flag value = 1 days = 75 }
						}
						10 = {
							set_country_flag = { flag = hre_influence_decisions_ai_timer_flag value = 1 days = 80 }
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				check_variable = { ITA_hre_influence < 20 }
			}
			modifier = {
				factor = 0
				has_country_flag = hre_influence_decisions_ai_timer_flag
				NOT = { date > 1940.01.01 }
			}
			modifier = {
				factor = 0
				check_variable = { ITA_hre_influence > 20 }
				check_variable = {
					var = ITA.hre_influence_diff
					value = 10
					compare = greater_than_or_equals
				}
			}
			modifier = {
				factor = 2
				check_variable = { ITA_hre_influence > 20 }
				check_variable = {
					var = ITA.hre_influence_diff
					value = -10
					compare = less_than_or_equals
				}
			}
		}
	}
}

BRG_hre_influence_decisions = {
	BRG_hre_political_influence = {
		icon = generic_political_discourse

		allowed = {
			tag = BRG
		}
		available = {
			has_government = absolutist
			ITA = { has_government = absolutist }
			is_in_faction_with = ITA
		}
		targets = { ITA }
		target_trigger = {
			FROM = {
				tag = ITA
			}
		}
		days_remove = 20
		cost = 10
		remove_effect = {
			custom_effect_tooltip = BRG_hre_political_influence_tt
			add_to_variable = { BRG_hre_influence = 5 }
			set_variable = { ITA.hre_influence_diff = ITA.ITA_hre_influence }
			subtract_from_variable = { ITA.hre_influence_diff = BRG.BRG_hre_influence }
			hidden_effect = {
				if = {
					limit = {
						date < 1939.08.01
					}
					random_list = {
						10 = {
							set_country_flag = { flag = hre_influence_decisions_ai_timer_flag value = 1 days = 50 }
						}
						10 = {
							set_country_flag = { flag = hre_influence_decisions_ai_timer_flag value = 1 days = 55 }
						}
						10 = {
							set_country_flag = { flag = hre_influence_decisions_ai_timer_flag value = 1 days = 60 }
						}
						10 = {
							set_country_flag = { flag = hre_influence_decisions_ai_timer_flag value = 1 days = 65 }
						}
						10 = {
							set_country_flag = { flag = hre_influence_decisions_ai_timer_flag value = 1 days = 70 }
						}
						10 = {
							set_country_flag = { flag = hre_influence_decisions_ai_timer_flag value = 1 days = 75 }
						}
						10 = {
							set_country_flag = { flag = hre_influence_decisions_ai_timer_flag value = 1 days = 80 }
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				check_variable = { BRG_hre_influence < 20 }
			}
			modifier = {
				factor = 0
				has_country_flag = hre_influence_decisions_ai_timer_flag
				NOT = { date > 1940.01.01 }
			}
			modifier = {
				factor = 0
				check_variable = { BRG_hre_influence > 20 }
				check_variable = {
					var = ITA.hre_influence_diff
					value = -10
					compare = less_than_or_equals
				}
			}
			modifier = {
				factor = 2
				check_variable = { BRG_hre_influence > 20 }
				check_variable = {
					var = ITA.hre_influence_diff
					value = 10
					compare = greater_than_or_equals
				}
			}
		}
	}
}